---
title: useVerifyMessage
description: Hook for verify that a message was signed by the provided address.
---

# useVerifyMessage

Hook for verify that a message was signed by the provided address. It supports verifying messages that were signed by either a Smart Contract Account or Externally Owned Account.

## Import

```ts
import { useVerifyMessage } from "starkweb/react";
```

## Usage

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";

function App() {
  const result = useVerifyMessage({
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

## Parameters

```ts
import { type UseVerifyMessageParameters } from "starkweb/react";
```

### address

`Address | undefined`

The address that signed the original message.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";

function App() {
  const result = useVerifyMessage({
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4", // [!code focus]
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

### message

`string | { raw: Hex | ByteArray } | undefined`

The message to be verified.

By default, Starkweb verifies the UTF-8 representation of the message.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";

function App() {
  const result = useVerifyMessage({
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world", // [!code focus]
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

:::tip
By default, Starkweb signs the UTF-8 representation of the message. To sign the data representation of the message, you can use the `raw` attribute.

```ts
import { useVerifyMessage } from "starkweb/react"

function App() {
  const result = useVerifyMessage({
    address: "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: { raw: "0x68656c6c6f20776f726c64" } // [!code focus]
    signature: "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  })
}
```

:::

### signature

`Hex | ByteArray | undefined`

The signature that was generated by signing the message with the address's signer.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";

function App() {
  const result = useVerifyMessage({
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2", // [!code focus]
  });
}
```

### chainId

`config["chains"][number]["id"] | undefined`

Only used when verifying a message that was signed by a Smart Contract Account. The ID of chain to check if the contract was already deployed.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";
import { mainnet } from "starkweb/react/chains";

function App() {
  const result = useVerifyMessage({
    chainId: mainnet.chain_id, // [!code focus]
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

### blockNumber

`bigint | undefined`

Only used when verifying a message that was signed by a Smart Contract Account. The block number to check if the contract was already deployed.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";
import { mainnet } from "starkweb/react/chains";

function App() {
  const result = useVerifyMessage({
    blockNumber: 892408, // [!code focus]
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

### blockTag

`"latest" | "earliest" | "pending" | "safe" | "finalized" | undefined`

Only used when verifying a message that was signed by a Smart Contract Account. The block tag to check if the contract was already deployed.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";
import { mainnet } from "starkweb/react/chains";

function App() {
  const result = useVerifyMessage({
    blockTag: "pending", // [!code focus]
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

### config

`Config | undefined`

[`Config`](/react/api/createConfig#config) to use instead of retrieving from the nearest [`StarkwebProvider`](/react/api/StarkwebProvider).

:::code-group

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react";
import { config } from "./config"; // [!code focus]

function App() {
  const result = useVerifyMessage({
    config, // [!code focus]
    address:
      "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature:
      "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  });
}
```

```ts [config.ts]
// [!include ~/snippets/config.ts]
```

:::

### scopeKey

`string | undefined`

Scopes the cache to a given context. Hooks that have identical context will share the same cache.

```tsx [index.tsx]
import { useVerifyMessage } from "starkweb/react"
import { config } from "./config"

function App() {
  const result = useVerifyMessage({
    scopeKey: "foo" // [!code focus]
    address: "0x06707675cd7dd9256667eca8284e46f4546711ee0054bc2dd02f0ce572056cf4",
    message: "hello world",
    signature: "0x03ffcf2d3c0ef66c362716dec0033e2252f934e0962394961f2ff579e12357b2",
  })
}
```

import QueryOptions from "../../../snippets/query-options.mdx";

<QueryOptions TData="VerifyMessageData" TError="VerifyMessageErrorType" />

## Return Type

```ts
import { type UseVerifyMessageReturnType } from "starkweb/react";
```

import QueryResult from "../../../snippets/query-result.mdx";

<QueryResult TData="VerifyMessageData" TError="VerifyMessageErrorType" />

## TanStack Query

```ts
import {
  type VerifyMessageData,
  type VerifyMessageOptions,
  type VerifyMessageQueryFnData,
  type VerifyMessageQueryKey,
  verifyMessageQueryKey,
  verifyMessageQueryOptions,
} from "starkweb/react/query";
```

## Examples

### Basic Usage

```tsx [basic.tsx]
import { useVerifyMessage } from "starkweb/react";

function MessageVerifier() {
  const {
    data: isValid,
    isLoading,
    error,
  } = useVerifyMessage({
    address: "0x1234...",
    message: "Hello Starknet!",
    signature: "0x5678...",
  });

  if (isLoading) return <div>Verifying message...</div>;
  if (error) return <div>Error: {error.message}</div>;

  return (
    <div>
      <div>Signature is {isValid ? "valid" : "invalid"}</div>
    </div>
  );
}
```

### With Raw Message Data

```tsx [raw-message.tsx]
import { useVerifyMessage } from "starkweb/react";

function RawMessageVerifier() {
  const { data: isValid } = useVerifyMessage({
    address: "0x1234...",
    message: { raw: "0x68656c6c6f20776f726c64" }, // "hello world" in hex
    signature: "0x5678...",
  });

  return (
    <div>
      <h3>Raw Message Verification</h3>
      <div>Signature Status: {isValid ? "Valid" : "Invalid"}</div>
    </div>
  );
}
```

### With Block Number Validation

```tsx [block-validation.tsx]
import { useVerifyMessage } from "starkweb/react";
import { useState } from "react";

function BlockVerifier() {
  const [blockNumber, setBlockNumber] = useState<number>();
  const { data: isValid, isLoading } = useVerifyMessage({
    address: "0x1234...",
    message: "Hello Starknet!",
    signature: "0x5678...",
    blockNumber,
    query: {
      enabled: Boolean(blockNumber),
    },
  });

  return (
    <div>
      <input
        type="number"
        value={blockNumber}
        onChange={(e) => setBlockNumber(Number(e.target.value))}
        placeholder="Enter block number"
      />
      {isLoading ? (
        <div>Verifying...</div>
      ) : (
        <div>
          {isValid !== undefined && (
            <div>
              Signature at block {blockNumber}: {isValid ? "Valid" : "Invalid"}
            </div>
          )}
        </div>
      )}
    </div>
  );
}
```

### With Error Handling and Retries

```tsx [error-handling.tsx]
import { useVerifyMessage } from "starkweb/react";

function SafeVerifier() {
  const {
    data: isValid,
    isError,
    error,
    refetch,
  } = useVerifyMessage({
    address: "0x1234...",
    message: "Hello Starknet!",
    signature: "0x5678...",
    query: {
      retry: 3,
      retryDelay: 1000,
      onError(error) {
        console.error("Verification failed:", error);
      },
    },
  });

  if (isError) {
    return (
      <div>
        <div>Error: {error.message}</div>
        <button onClick={() => refetch()}>Retry Verification</button>
      </div>
    );
  }

  return (
    <div>
      <h3>Message Verification</h3>
      {isValid !== undefined && (
        <div>Signature is {isValid ? "valid" : "invalid"}</div>
      )}
    </div>
  );
}
```
